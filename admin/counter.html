<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>OceanZ - POS Counter</title>
  
  <!-- PWA Meta Tags -->
  <meta name="description" content="OceanZ Gaming Cafe - POS Counter for quick recharges"/>
  <meta name="theme-color" content="#ff6b00"/>
  <meta name="mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
  <meta name="apple-mobile-web-app-title" content="OceanZ POS"/>
  <link rel="manifest" href="manifest.webmanifest"/>
  <link rel="icon" type="image/svg+xml" href="../assets/icons/admin-icon.svg"/>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/common.css">
  <style>
    :root {
      --pos-orange: #ff6b00;
      --pos-green: #00ff88;
      --pos-cyan: #00f0ff;
      --pos-purple: #b829ff;
      --pos-red: #ff0044;
      --pos-yellow: #ffff00;
    }
    
    * { box-sizing: border-box; }
    
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
    }
    
    body {
      background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #0f0f1a 100%);
      font-family: 'Rajdhani', sans-serif;
    }
    
    .pos-app {
      display: flex;
      flex-direction: column;
      height: 100vh;
      width: 100vw;
      overflow: hidden;
    }
    
    /* Header */
    .pos-header {
      flex: 0 0 auto;
      background: rgba(0, 0, 0, 0.9);
      border-bottom: 2px solid var(--pos-orange);
      padding: 8px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .pos-header h1 {
      font-family: 'Orbitron', monospace;
      font-size: 1rem;
      color: var(--pos-orange);
      margin: 0;
    }
    
    /* Main Grid */
    .pos-main {
      flex: 1;
      display: grid;
      grid-template-columns: 1fr 280px;
      gap: 12px;
      padding: 12px;
      overflow: hidden;
      min-height: 0;
    }
    
    /* Left Panel */
    .pos-left {
      display: flex;
      flex-direction: column;
      gap: 10px;
      overflow: hidden;
    }
    
    /* Card Style */
    .pos-card {
      background: rgba(10, 10, 20, 0.8);
      border: 1px solid rgba(255, 107, 0, 0.2);
      border-radius: 12px;
      padding: 12px;
    }
    
    .pos-card-title {
      font-family: 'Orbitron', monospace;
      font-size: 0.7rem;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    /* Member Input */
    .member-row {
      display: flex;
      gap: 8px;
    }
    
    .member-input {
      flex: 1;
      background: rgba(0, 0, 0, 0.5);
      border: 2px solid rgba(255, 107, 0, 0.3);
      border-radius: 8px;
      padding: 10px 12px;
      font-size: 1rem;
      font-family: 'Orbitron', monospace;
      color: white;
      text-transform: uppercase;
    }
    
    .member-input:focus {
      outline: none;
      border-color: var(--pos-orange);
    }
    
    .guest-select {
      background: rgba(0, 240, 255, 0.1);
      border: 2px solid rgba(0, 240, 255, 0.3);
      border-radius: 8px;
      padding: 8px;
      color: var(--pos-cyan);
      font-family: 'Orbitron', monospace;
      font-size: 0.8rem;
      cursor: pointer;
    }
    
    /* Amount Grid */
    .amount-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
    }
    
    .amount-btn {
      background: linear-gradient(145deg, rgba(255, 107, 0, 0.15), rgba(255, 107, 0, 0.05));
      border: 2px solid rgba(255, 107, 0, 0.4);
      border-radius: 10px;
      padding: 12px 8px;
      text-align: center;
      cursor: pointer;
      transition: all 0.15s;
    }
    
    .amount-btn:hover {
      border-color: var(--pos-orange);
      box-shadow: 0 0 15px rgba(255, 107, 0, 0.3);
    }
    
    .amount-btn.selected {
      background: linear-gradient(145deg, rgba(255, 107, 0, 0.4), rgba(255, 107, 0, 0.2));
      border-color: var(--pos-orange);
      box-shadow: 0 0 20px rgba(255, 107, 0, 0.4);
    }
    
    .amount-btn .value {
      font-family: 'Orbitron', monospace;
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--pos-orange);
    }
    
    .amount-btn .label {
      font-size: 0.65rem;
      color: #666;
      margin-top: 2px;
    }
    
    .custom-input {
      background: transparent;
      border: none;
      font-family: 'Orbitron', monospace;
      font-size: 1.1rem;
      color: var(--pos-orange);
      text-align: center;
      width: 100%;
    }
    
    .custom-input:focus { outline: none; }
    .custom-input::placeholder { color: #555; }
    
    /* Free Amount Row */
    .free-row {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 12px;
      background: rgba(255, 255, 0, 0.05);
      border: 1px solid rgba(255, 255, 0, 0.2);
      border-radius: 8px;
    }
    
    .free-row label {
      font-size: 0.8rem;
      color: var(--pos-yellow);
      white-space: nowrap;
    }
    
    .free-input {
      flex: 1;
      background: transparent;
      border: none;
      border-bottom: 2px solid rgba(255, 255, 0, 0.3);
      padding: 4px 8px;
      font-family: 'Orbitron', monospace;
      font-size: 1rem;
      color: var(--pos-yellow);
      text-align: center;
      max-width: 100px;
    }
    
    .free-input:focus {
      outline: none;
      border-color: var(--pos-yellow);
    }
    
    /* Payment Buttons */
    .payment-row {
      display: flex;
      gap: 8px;
    }
    
    .payment-btn {
      flex: 1;
      background: rgba(0, 0, 0, 0.4);
      border: 2px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      padding: 10px;
      cursor: pointer;
      transition: all 0.15s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .payment-btn span {
      font-family: 'Orbitron', monospace;
      font-size: 0.85rem;
    }
    
    .payment-btn.cash.selected {
      background: rgba(0, 240, 255, 0.15);
      border-color: var(--pos-cyan);
    }
    .payment-btn.cash.selected span { color: var(--pos-cyan); }
    
    .payment-btn.upi.selected {
      background: rgba(184, 41, 255, 0.15);
      border-color: var(--pos-purple);
    }
    .payment-btn.upi.selected span { color: var(--pos-purple); }
    
    .payment-btn.credit.selected {
      background: rgba(255, 107, 0, 0.15);
      border-color: var(--pos-orange);
    }
    .payment-btn.credit.selected span { color: var(--pos-orange); }
    
    /* Summary & Confirm */
    .summary-row {
      display: flex;
      align-items: center;
      gap: 12px;
    }
    
    .summary-box {
      flex: 1;
      text-align: center;
      padding: 12px;
      background: rgba(255, 107, 0, 0.1);
      border: 1px solid rgba(255, 107, 0, 0.3);
      border-radius: 10px;
    }
    
    .summary-box .total {
      font-family: 'Orbitron', monospace;
      font-size: 2rem;
      font-weight: 700;
      color: var(--pos-orange);
      text-shadow: 0 0 20px var(--pos-orange);
    }
    
    .summary-box .breakdown {
      font-size: 0.75rem;
      color: #888;
    }
    
    .confirm-btn {
      background: linear-gradient(135deg, var(--pos-green), #00cc66);
      border: none;
      border-radius: 12px;
      padding: 16px 32px;
      font-family: 'Orbitron', monospace;
      font-size: 1rem;
      font-weight: 700;
      color: #000;
      cursor: pointer;
      transition: all 0.15s;
      white-space: nowrap;
    }
    
    .confirm-btn:hover:not(:disabled) {
      box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
      transform: scale(1.02);
    }
    
    .confirm-btn:disabled {
      background: #333;
      color: #666;
      cursor: not-allowed;
    }
    
    /* Right Panel */
    .pos-right {
      display: flex;
      flex-direction: column;
      gap: 10px;
      overflow: hidden;
    }
    
    /* Stats Grid */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 8px;
    }
    
    .stat-card {
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 8px;
      padding: 10px;
      text-align: center;
    }
    
    .stat-card .value {
      font-family: 'Orbitron', monospace;
      font-size: 1.1rem;
      font-weight: 700;
    }
    
    .stat-card .label {
      font-size: 0.65rem;
      color: #666;
      text-transform: uppercase;
    }
    
    /* Recent List */
    .recent-list {
      flex: 1;
      overflow-y: auto;
      min-height: 0;
    }
    
    .recent-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 10px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 8px;
      margin-bottom: 6px;
    }
    
    .recent-item .member {
      font-family: 'Orbitron', monospace;
      font-size: 0.85rem;
      color: var(--pos-cyan);
    }
    
    .recent-item .time {
      font-size: 0.7rem;
      color: #555;
    }
    
    .recent-item .amount {
      font-family: 'Orbitron', monospace;
      font-size: 0.9rem;
      color: var(--pos-green);
    }
    
    /* Member Suggestions */
    .suggestions {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: rgba(10, 10, 15, 0.98);
      border: 2px solid var(--pos-orange);
      border-top: none;
      border-radius: 0 0 8px 8px;
      max-height: 150px;
      overflow-y: auto;
      z-index: 100;
      display: none;
    }
    
    .suggestions.show { display: block; }
    
    .suggestion {
      padding: 8px 12px;
      cursor: pointer;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      font-family: 'Orbitron', monospace;
      color: var(--pos-orange);
    }
    
    .suggestion:hover {
      background: rgba(255, 107, 0, 0.2);
    }
    
    /* Success Animation */
    .success-flash {
      position: fixed;
      inset: 0;
      background: rgba(0, 255, 136, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      animation: flash 0.4s ease-out forwards;
    }
    
    @keyframes flash {
      0% { opacity: 0; }
      30% { opacity: 1; }
      100% { opacity: 0; }
    }
    
    .success-flash .icon {
      font-size: 5rem;
      color: var(--pos-green);
      animation: pop 0.3s ease-out;
    }
    
    @keyframes pop {
      0% { transform: scale(0); }
      70% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }
    
    /* Loading */
    .loading-screen {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #0f0f1a 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 200;
    }
    
    /* Mobile */
    @media (max-width: 768px) {
      .pos-main {
        grid-template-columns: 1fr;
        grid-template-rows: 1fr auto;
      }
      
      .pos-right {
        display: none;
      }
      
      .amount-grid {
        grid-template-columns: repeat(4, 1fr);
      }
      
      .amount-btn .value {
        font-size: 1rem;
      }
      
      .summary-row {
        flex-direction: column;
      }
      
      .summary-box {
        width: 100%;
      }
      
      .confirm-btn {
        width: 100%;
      }
    }
  </style>
</head>
<body class="text-white">
  
  <!-- Loading -->
  <div id="loadingScreen" class="loading-screen">
    <div class="text-center">
      <div class="w-12 h-12 mx-auto mb-3 border-4 border-t-orange-500 border-r-transparent border-b-orange-500 border-l-transparent rounded-full animate-spin"></div>
      <p class="text-gray-500 font-orbitron text-xs">LOADING...</p>
    </div>
  </div>

  <!-- Main App -->
  <div id="posApp" class="pos-app hidden">
    
    <!-- Header -->
    <header class="pos-header">
      <div class="flex items-center gap-3">
        <h1>‚ö° OCEANZ POS</h1>
      </div>
      <div class="flex items-center gap-4">
        <div class="text-right">
          <div id="userName" class="font-orbitron text-xs" style="color: var(--pos-cyan);">-</div>
          <div id="dateTime" class="text-xs text-gray-600"></div>
        </div>
        <button onclick="posLogout()" class="p-2 hover:bg-red-500/20 rounded-lg" title="Logout">
          <i data-lucide="log-out" class="w-4 h-4" style="color: var(--pos-red);"></i>
        </button>
      </div>
    </header>
    
    <!-- Main Content -->
    <main class="pos-main">
      
      <!-- Left Panel: Recharge Form -->
      <div class="pos-left">
        
        <!-- Member Input -->
        <div class="pos-card">
          <div class="pos-card-title">
            <i data-lucide="user" class="w-3 h-3"></i> Member / Guest
          </div>
          <div class="member-row" style="position: relative;">
            <input type="text" id="memberInput" class="member-input" placeholder="Type name..." autocomplete="off"/>
            <select id="guestSelect" class="guest-select" onchange="selectGuest(this.value)">
              <option value="">Guest ‚ñæ</option>
            </select>
            <div id="suggestions" class="suggestions"></div>
          </div>
        </div>
        
        <!-- Quick Amounts -->
        <div class="pos-card" style="flex: 1;">
          <div class="pos-card-title">
            <i data-lucide="zap" class="w-3 h-3"></i> Amount
          </div>
          <div class="amount-grid">
            <button class="amount-btn" data-amount="50"><div class="value">‚Çπ50</div><div class="label">30m</div></button>
            <button class="amount-btn" data-amount="100"><div class="value">‚Çπ100</div><div class="label">1h</div></button>
            <button class="amount-btn" data-amount="200"><div class="value">‚Çπ200</div><div class="label">2h</div></button>
            <button class="amount-btn" data-amount="300"><div class="value">‚Çπ300</div><div class="label">3h</div></button>
            <button class="amount-btn" data-amount="400"><div class="value">‚Çπ400</div><div class="label">4h</div></button>
            <button class="amount-btn" data-amount="500"><div class="value">‚Çπ500</div><div class="label">5h</div></button>
            <button class="amount-btn" data-amount="1000"><div class="value">‚Çπ1K</div><div class="label">Pop</div></button>
            <div class="amount-btn" style="border-style: dashed;">
              <input type="number" id="customAmount" class="custom-input" placeholder="‚Çπ..." min="10"/>
              <div class="label">Custom</div>
            </div>
          </div>
          
          <!-- Free Amount -->
          <div class="free-row mt-3">
            <label>üéÅ Free:</label>
            <input type="number" id="freeAmount" class="free-input" placeholder="0" min="0"/>
            <span class="text-xs text-gray-500">(Offer/Bonus)</span>
          </div>
        </div>
        
        <!-- Payment Method -->
        <div class="pos-card">
          <div class="pos-card-title">
            <i data-lucide="credit-card" class="w-3 h-3"></i> Payment
          </div>
          <div class="payment-row">
            <button class="payment-btn cash selected" onclick="selectPayment('cash')">
              <i data-lucide="banknote" class="w-4 h-4" style="color: var(--pos-cyan);"></i>
              <span style="color: var(--pos-cyan);">CASH</span>
            </button>
            <button class="payment-btn upi" onclick="selectPayment('upi')">
              <i data-lucide="smartphone" class="w-4 h-4" style="color: var(--pos-purple);"></i>
              <span style="color: var(--pos-purple);">UPI</span>
            </button>
            <button class="payment-btn credit" onclick="selectPayment('credit')">
              <i data-lucide="clock" class="w-4 h-4" style="color: var(--pos-orange);"></i>
              <span style="color: var(--pos-orange);">CREDIT</span>
            </button>
          </div>
        </div>
        
        <!-- Summary & Confirm -->
        <div class="summary-row">
          <div class="summary-box">
            <div class="total" id="totalDisplay">‚Çπ0</div>
            <div class="breakdown" id="breakdownDisplay">Select amount</div>
          </div>
          <button id="confirmBtn" class="confirm-btn" onclick="confirmRecharge()" disabled>
            ‚úì ADD
          </button>
        </div>
        
      </div>
      
      <!-- Right Panel: Stats -->
      <div class="pos-right">
        
        <!-- Today Stats -->
        <div class="pos-card">
          <div class="pos-card-title">üìä Today</div>
          <div class="stats-grid">
            <div class="stat-card">
              <div class="value" id="statCash" style="color: var(--pos-cyan);">‚Çπ0</div>
              <div class="label">Cash</div>
            </div>
            <div class="stat-card">
              <div class="value" id="statUpi" style="color: var(--pos-purple);">‚Çπ0</div>
              <div class="label">UPI</div>
            </div>
            <div class="stat-card">
              <div class="value" id="statCredit" style="color: var(--pos-orange);">‚Çπ0</div>
              <div class="label">Credit</div>
            </div>
            <div class="stat-card">
              <div class="value" id="statCount" style="color: var(--pos-green);">0</div>
              <div class="label">TXN</div>
            </div>
          </div>
        </div>
        
        <!-- Recent -->
        <div class="pos-card" style="flex: 1; display: flex; flex-direction: column; min-height: 0;">
          <div class="pos-card-title">üïê Recent</div>
          <div class="recent-list" id="recentList">
            <p class="text-gray-600 text-center text-xs py-4">No transactions</p>
          </div>
        </div>
        
        <!-- Dashboard Link -->
        <a href="dashboard.html" class="pos-card flex items-center gap-2 hover:border-cyan-500/50 transition-colors">
          <i data-lucide="layout-dashboard" class="w-4 h-4 text-gray-500"></i>
          <span class="text-gray-500 text-sm">Full Dashboard</span>
          <i data-lucide="chevron-right" class="w-3 h-3 text-gray-600 ml-auto"></i>
        </a>
        
      </div>
      
    </main>
    
  </div>

  <!-- Success Flash -->
  <div id="successFlash" class="success-flash" style="display: none;">
    <div class="icon">‚úì</div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  
  <!-- POS Counter Logic -->
  <script type="module" src="js/counter.js"></script>
</body>
</html>

