<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>OceanZ - POS Counter</title>
  
  <!-- PWA Meta Tags -->
  <meta name="description" content="OceanZ Gaming Cafe - POS Counter"/>
  <meta name="theme-color" content="#ff6b00"/>
  <meta name="mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
  <meta name="apple-mobile-web-app-title" content="OceanZ POS"/>
  <link rel="manifest" href="manifest.webmanifest"/>
  <link rel="icon" type="image/svg+xml" href="../assets/icons/admin-icon.svg"/>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/common.css">
  <style>
    :root {
      --pos-orange: #ff6b00;
      --pos-green: #00ff88;
      --pos-cyan: #00f0ff;
      --pos-purple: #b829ff;
      --pos-red: #ff0044;
      --pos-yellow: #ffff00;
    }
    
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; padding: 0; overflow: hidden; }
    body {
      background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #0f0f1a 100%);
      font-family: 'Rajdhani', sans-serif;
    }
    
    .pos-app { display: flex; flex-direction: column; height: 100vh; width: 100vw; overflow: hidden; }
    
    /* Header */
    .pos-header {
      flex: 0 0 auto;
      background: rgba(0, 0, 0, 0.9);
      border-bottom: 2px solid var(--pos-orange);
      padding: 8px 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .pos-header h1 { font-family: 'Orbitron', monospace; font-size: 0.9rem; color: var(--pos-orange); margin: 0; }
    
    /* Tab Navigation */
    .pos-tabs {
      display: flex;
      gap: 4px;
      background: rgba(0,0,0,0.5);
      padding: 6px;
      border-bottom: 1px solid rgba(255,107,0,0.2);
    }
    .pos-tab {
      flex: 1;
      padding: 8px 6px;
      text-align: center;
      font-family: 'Orbitron', monospace;
      font-size: 0.65rem;
      color: #999;
      cursor: pointer;
      border-radius: 6px;
      transition: all 0.2s;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }
    .pos-tab span { display: block; }
    .pos-tab:hover { background: rgba(255,107,0,0.1); color: #ccc; }
    .pos-tab.active {
      background: rgba(255,107,0,0.2);
      color: var(--pos-orange);
      border: 1px solid rgba(255,107,0,0.4);
    }
    .pos-tab .badge {
      background: var(--pos-red);
      color: white;
      font-size: 0.55rem;
      padding: 2px 6px;
      border-radius: 10px;
      min-width: 16px;
    }
    
    /* Main Content */
    .pos-content { flex: 1; overflow: hidden; display: flex; flex-direction: column; min-height: 0; }
    .pos-panel { display: none; flex: 1; overflow: hidden; padding: 10px; min-height: 0; }
    .pos-panel.active { display: flex; flex-direction: column; gap: 10px; }
    
    /* Card Style */
    .pos-card {
      background: rgba(10, 10, 20, 0.8);
      border: 1px solid rgba(255, 107, 0, 0.2);
      border-radius: 10px;
      padding: 10px;
    }
    .pos-card-title {
      font-family: 'Orbitron', monospace;
      font-size: 0.65rem;
      color: #666;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    /* Member Input */
    .member-input {
      width: 100%;
      background: rgba(0, 0, 0, 0.5);
      border: 2px solid rgba(255, 107, 0, 0.3);
      border-radius: 8px;
      padding: 10px 12px;
      font-size: 1rem;
      font-family: 'Orbitron', monospace;
      color: white;
      text-transform: uppercase;
    }
    .member-input:focus { outline: none; border-color: var(--pos-orange); }
    
    /* Amount Grid */
    .amount-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; }
    .amount-btn {
      background: linear-gradient(145deg, rgba(255, 107, 0, 0.15), rgba(255, 107, 0, 0.05));
      border: 2px solid rgba(255, 107, 0, 0.4);
      border-radius: 8px;
      padding: 8px 4px;
      text-align: center;
      cursor: pointer;
      transition: all 0.15s;
    }
    .amount-btn:hover { border-color: var(--pos-orange); box-shadow: 0 0 15px rgba(255, 107, 0, 0.3); }
    .amount-btn.selected {
      background: linear-gradient(145deg, rgba(255, 107, 0, 0.4), rgba(255, 107, 0, 0.2));
      border-color: var(--pos-orange);
      box-shadow: 0 0 20px rgba(255, 107, 0, 0.4);
    }
    .amount-btn.combo {
      background: linear-gradient(145deg, rgba(255, 255, 0, 0.1), rgba(255, 107, 0, 0.1));
      border-color: rgba(255, 255, 0, 0.4);
    }
    .amount-btn.combo:hover {
      border-color: var(--pos-yellow);
      box-shadow: 0 0 15px rgba(255, 255, 0, 0.3);
    }
    .amount-btn.combo.selected {
      background: linear-gradient(145deg, rgba(255, 255, 0, 0.3), rgba(255, 107, 0, 0.2));
      border-color: var(--pos-yellow);
      box-shadow: 0 0 20px rgba(255, 255, 0, 0.4);
    }
    .amount-btn .value { font-family: 'Orbitron', monospace; font-size: 0.95rem; font-weight: 700; color: var(--pos-orange); }
    .amount-btn .label { font-size: 0.55rem; color: #666; margin-top: 1px; }
    .custom-input {
      background: transparent; border: none;
      font-family: 'Orbitron', monospace; font-size: 1rem;
      color: var(--pos-orange); text-align: center; width: 100%;
    }
    .custom-input:focus { outline: none; }
    .custom-input::placeholder { color: #555; }
    
    /* Split Payment */
    .split-payment { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
    .split-box {
      background: rgba(0,0,0,0.3);
      border-radius: 8px;
      padding: 8px;
      text-align: center;
    }
    .split-box label { font-size: 0.7rem; color: #888; display: block; margin-bottom: 4px; }
    .split-input {
      width: 100%;
      background: transparent;
      border: none;
      border-bottom: 2px solid rgba(255,255,255,0.2);
      font-family: 'Orbitron', monospace;
      font-size: 1.2rem;
      color: white;
      text-align: center;
      padding: 4px;
    }
    .split-input:focus { outline: none; }
    .split-box.cash .split-input { color: var(--pos-cyan); border-color: var(--pos-cyan); }
    .split-box.upi .split-input { color: var(--pos-purple); border-color: var(--pos-purple); }
    
    /* Payment Mode Toggle */
    .payment-toggle { display: flex; gap: 4px; flex-wrap: nowrap; }
    .payment-opt {
      flex: 1;
      padding: 6px 4px;
      border-radius: 6px;
      text-align: center;
      cursor: pointer;
      font-family: 'Orbitron', monospace;
      font-size: 0.6rem;
      border: 2px solid transparent;
      transition: all 0.15s;
      white-space: nowrap;
    }
    .payment-opt.cash { background: rgba(0,240,255,0.1); color: var(--pos-cyan); }
    .payment-opt.upi { background: rgba(184,41,255,0.1); color: var(--pos-purple); }
    .payment-opt.split { background: rgba(255,255,0,0.1); color: var(--pos-yellow); }
    .payment-opt.credit { background: rgba(255,107,0,0.1); color: var(--pos-orange); }
    .payment-opt.selected { border-color: currentColor; box-shadow: 0 0 10px currentColor; }
    
    /* Summary */
    .summary-row { display: flex; gap: 8px; align-items: stretch; }
    .summary-box {
      flex: 1;
      text-align: center;
      padding: 10px;
      background: rgba(255, 107, 0, 0.1);
      border: 1px solid rgba(255, 107, 0, 0.3);
      border-radius: 10px;
    }
    .summary-box .total {
      font-family: 'Orbitron', monospace;
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--pos-orange);
      text-shadow: 0 0 20px var(--pos-orange);
    }
    .summary-box .breakdown { font-size: 0.7rem; color: #888; }
    .confirm-btn {
      background: linear-gradient(135deg, var(--pos-green), #00cc66);
      border: none;
      border-radius: 10px;
      padding: 0 24px;
      font-family: 'Orbitron', monospace;
      font-size: 1rem;
      font-weight: 700;
      color: #000;
      cursor: pointer;
      transition: all 0.15s;
      white-space: nowrap;
    }
    .confirm-btn:hover:not(:disabled) { box-shadow: 0 0 30px rgba(0, 255, 136, 0.5); transform: scale(1.02); }
    .confirm-btn:disabled { background: #333; color: #666; cursor: not-allowed; }
    
    /* Stats Bar */
    .stats-bar {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 6px;
      background: rgba(0,0,0,0.4);
      padding: 8px;
      border-top: 1px solid rgba(255,107,0,0.2);
    }
    .stat-item { text-align: center; }
    .stat-item .value { font-family: 'Orbitron', monospace; font-size: 0.9rem; font-weight: 700; }
    .stat-item .label { font-size: 0.6rem; color: #666; text-transform: uppercase; }
    
    /* Booking Items */
    .booking-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      background: rgba(0,0,0,0.3);
      border-radius: 8px;
      border-left: 3px solid var(--pos-cyan);
    }
    .booking-item.pending { border-left-color: var(--pos-yellow); }
    .booking-item.ongoing { border-left-color: var(--pos-green); background: rgba(0,255,136,0.05); }
    .booking-item.past { border-left-color: #444; }
    .booking-item .info { flex: 1; }
    .booking-item .name { font-family: 'Orbitron', monospace; font-size: 0.9rem; color: var(--pos-cyan); }
    .booking-item .details { font-size: 0.7rem; color: #888; }
    .booking-item .actions { display: flex; gap: 6px; }
    .booking-action {
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 0.7rem;
      font-family: 'Orbitron', monospace;
      cursor: pointer;
      border: none;
    }
    .booking-action.approve { background: var(--pos-green); color: #000; }
    .booking-action.decline { background: var(--pos-red); color: white; }
    
    /* Credit Items */
    .credit-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      background: rgba(0,0,0,0.3);
      border-radius: 8px;
      border-left: 3px solid var(--pos-orange);
    }
    .credit-item .member { font-family: 'Orbitron', monospace; font-size: 0.9rem; color: var(--pos-orange); }
    .credit-item .amount { font-family: 'Orbitron', monospace; font-size: 1rem; color: var(--pos-red); }
    .credit-item .collect-btn {
      background: var(--pos-green);
      color: #000;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 0.7rem;
      font-family: 'Orbitron', monospace;
      cursor: pointer;
      border: none;
    }
    
    /* Recent List */
    .recent-item {
      display: flex !important;
      flex-direction: row !important;
      justify-content: space-between;
      align-items: center;
      padding: 5px 10px;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 6px;
      width: 100%;
      height: auto;
      min-height: 28px;
    }
    .recent-item .info { 
      flex: 1; 
      min-width: 0; 
      display: flex !important; 
      flex-direction: row !important;
      align-items: center; 
      gap: 6px; 
    }
    .recent-item .info > * { display: inline !important; }
    .recent-item .member { font-family: 'Orbitron', monospace; font-size: 0.7rem; color: var(--pos-cyan); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 120px; }
    .recent-item .time { font-size: 0.6rem; color: #666; white-space: nowrap; }
    .recent-item .amount { font-family: 'Orbitron', monospace; font-size: 0.75rem; color: var(--pos-green); white-space: nowrap; flex-shrink: 0; margin-left: auto; }
    
    /* Suggestions */
    .suggestions {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: rgba(10, 10, 15, 0.98);
      border: 2px solid var(--pos-orange);
      border-top: none;
      border-radius: 0 0 8px 8px;
      max-height: 150px;
      overflow-y: auto;
      z-index: 100;
      display: none;
    }
    .suggestions.show { display: block; }
    .suggestion {
      padding: 8px 12px;
      cursor: pointer;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
      font-family: 'Orbitron', monospace;
      color: var(--pos-orange);
    }
    .suggestion:hover { background: rgba(255, 107, 0, 0.2); }
    
    /* Loading & Success */
    .loading-screen {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, #0a0a0f 0%, #1a1a2e 50%, #0f0f1a 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 200;
    }
    .success-flash {
      position: fixed;
      inset: 0;
      background: rgba(0, 255, 136, 0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      animation: flash 0.4s ease-out forwards;
    }
    @keyframes flash { 0% { opacity: 0; } 30% { opacity: 1; } 100% { opacity: 0; } }
    .success-flash .icon { font-size: 5rem; color: var(--pos-green); animation: pop 0.3s ease-out; }
    @keyframes pop { 0% { transform: scale(0); } 70% { transform: scale(1.2); } 100% { transform: scale(1); } }
    
    /* Quick Actions */
    .quick-actions { display: flex; gap: 6px; flex-wrap: wrap; }
    .quick-action {
      flex: 1;
      min-width: 70px;
      padding: 8px;
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      font-size: 0.65rem;
      background: rgba(0,0,0,0.3);
      border: 1px solid rgba(255,255,255,0.1);
      color: #888;
      transition: all 0.15s;
    }
    .quick-action:hover { background: rgba(255,107,0,0.1); border-color: var(--pos-orange); color: var(--pos-orange); }
    .quick-action i { display: block; margin-bottom: 4px; }
    
    /* Modal */
    .pos-modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(8px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 500;
      padding: 16px;
    }
    .pos-modal.hidden { display: none; }
    .modal-content {
      background: rgba(15,15,25,0.98);
      border: 1px solid var(--pos-orange);
      border-radius: 12px;
      padding: 16px;
      width: 100%;
      max-width: 360px;
    }
    .modal-title {
      font-family: 'Orbitron', monospace;
      font-size: 0.9rem;
      color: var(--pos-orange);
      margin-bottom: 12px;
      text-align: center;
    }
    
    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 30px;
      color: #666;
    }
    .empty-state i { margin-bottom: 10px; opacity: 0.5; }
    
    /* Food Panel Styles */
    #foodCustomerSuggestions {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: rgba(20, 20, 30, 0.98);
      border: 1px solid rgba(255,107,0,0.3);
      border-radius: 8px;
      max-height: 150px;
      overflow-y: auto;
      z-index: 50;
      margin-top: 4px;
    }
    #foodCustomerSuggestions .suggestion {
      padding: 8px 12px;
      cursor: pointer;
      transition: background 0.2s;
      font-size: 0.85rem;
    }
    #foodCustomerSuggestions .suggestion:hover {
      background: rgba(255,107,0,0.2);
    }
    
    .food-quick-customer {
      flex: 1;
      padding: 6px;
      font-size: 0.7rem;
      border-radius: 6px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.1);
      color: #aaa;
      cursor: pointer;
      transition: all 0.2s;
    }
    .food-quick-customer:hover {
      background: rgba(255,107,0,0.1);
      border-color: rgba(255,107,0,0.3);
      color: var(--pos-orange);
    }
    
    .food-category-tabs {
      display: flex;
      gap: 4px;
      margin-left: auto;
    }
    .food-cat {
      padding: 4px 8px;
      font-size: 0.65rem;
      border-radius: 4px;
      background: transparent;
      border: 1px solid transparent;
      color: #888;
      cursor: pointer;
      transition: all 0.2s;
    }
    .food-cat:hover {
      background: rgba(255,107,0,0.1);
    }
    .food-cat.active {
      background: rgba(255,107,0,0.2);
      border-color: rgba(255,107,0,0.4);
      color: var(--pos-orange);
    }
    
    .food-menu-grid {
      flex: 1;
      overflow-y: auto;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
      padding: 8px 0;
    }
    
    .food-menu-item {
      background: rgba(0,0,0,0.4);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 8px;
      padding: 10px 6px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
    }
    .food-menu-item:hover {
      border-color: var(--pos-orange);
      background: rgba(255,107,0,0.1);
    }
    .food-menu-item:active {
      transform: scale(0.95);
    }
    .food-menu-item.out-of-stock {
      opacity: 0.4;
      pointer-events: none;
    }
    .food-menu-item .item-emoji { font-size: 1.2rem; margin-bottom: 2px; }
    .food-menu-item .item-name { 
      font-size: 0.7rem; 
      color: #ddd;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .food-menu-item .item-price { 
      font-family: 'Orbitron', monospace; 
      font-size: 0.75rem;
      color: var(--pos-green);
      margin-top: 2px;
    }
    
    .food-cart {
      flex-shrink: 0;
    }
    .food-cart-items {
      max-height: 100px;
      overflow-y: auto;
    }
    .food-cart-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 6px 8px;
      background: rgba(0,0,0,0.3);
      border-radius: 6px;
      margin-bottom: 4px;
    }
    .food-cart-item .item-info {
      flex: 1;
      min-width: 0;
    }
    .food-cart-item .item-name {
      font-size: 0.75rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .food-cart-item .item-qty {
      font-size: 0.65rem;
      color: #888;
    }
    .food-cart-item .qty-controls {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .food-cart-item .qty-btn {
      width: 22px;
      height: 22px;
      border-radius: 4px;
      border: 1px solid rgba(255,255,255,0.2);
      background: transparent;
      color: #aaa;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
    }
    .food-cart-item .qty-btn:hover {
      background: rgba(255,107,0,0.2);
      border-color: var(--pos-orange);
      color: var(--pos-orange);
    }
    .food-cart-item .item-total {
      font-family: 'Orbitron', monospace;
      font-size: 0.75rem;
      color: var(--pos-green);
      margin-left: 8px;
    }
    
    .food-cart-total {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 12px;
      background: rgba(0,255,136,0.1);
      border-radius: 8px;
      margin: 8px 0;
    }
    
    .food-pay-btn {
      flex: 1;
      padding: 6px 4px;
      border-radius: 6px;
      text-align: center;
      cursor: pointer;
      font-family: 'Orbitron', monospace;
      font-size: 0.55rem;
      border: 2px solid transparent;
      transition: all 0.15s;
      white-space: nowrap;
      background: rgba(255,255,255,0.05);
      color: #888;
    }
    .food-pay-btn:hover {
      background: rgba(255,255,255,0.1);
    }
    .food-pay-btn.active {
      border-color: var(--pos-orange);
      background: rgba(255,107,0,0.15);
      color: var(--pos-orange);
    }
    
    .food-checkout-btn {
      width: 100%;
      padding: 12px;
      border-radius: 8px;
      font-family: 'Orbitron', monospace;
      font-size: 0.85rem;
      font-weight: bold;
      background: linear-gradient(135deg, var(--pos-orange), #cc5500);
      color: white;
      border: none;
      cursor: pointer;
      transition: all 0.2s;
      margin-top: 8px;
    }
    .food-checkout-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(255,107,0,0.4);
    }
    .food-checkout-btn:active {
      transform: translateY(0);
    }
    .food-checkout-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none !important;
    }
  </style>
</head>
<body class="text-white">
  
  <!-- Loading -->
  <div id="loadingScreen" class="loading-screen">
    <div class="text-center">
      <div class="w-12 h-12 mx-auto mb-3 border-4 border-t-orange-500 border-r-transparent border-b-orange-500 border-l-transparent rounded-full animate-spin"></div>
      <p class="text-gray-500 font-orbitron text-xs">LOADING...</p>
    </div>
  </div>

  <!-- Main App -->
  <div id="posApp" class="pos-app hidden">
    
    <!-- Header -->
    <header class="pos-header">
      <div class="flex items-center gap-2">
        <h1>‚ö° OCEANZ POS</h1>
        <span id="dateTime" class="text-xs text-gray-600"></span>
      </div>
      <div class="flex items-center gap-3">
        <div id="userName" class="font-orbitron text-xs" style="color: var(--pos-cyan);">-</div>
        <button onclick="posLogout()" class="p-1.5 hover:bg-red-500/20 rounded-lg" title="Logout">
          <i data-lucide="log-out" class="w-4 h-4" style="color: var(--pos-red);"></i>
        </button>
      </div>
    </header>
    
    <!-- Tab Navigation -->
    <div class="pos-tabs">
      <div class="pos-tab active" data-tab="recharge" onclick="switchPosTab('recharge')">
        <i data-lucide="plus-circle" class="w-4 h-4"></i>
        <span>Recharge</span>
      </div>
      <div class="pos-tab" data-tab="bookings" onclick="switchPosTab('bookings')">
        <i data-lucide="calendar" class="w-4 h-4"></i>
        <span>Bookings</span>
        <span class="badge hidden" id="pendingBadge">0</span>
      </div>
      <div class="pos-tab" data-tab="credits" onclick="switchPosTab('credits')">
        <i data-lucide="credit-card" class="w-4 h-4"></i>
        <span>Credits</span>
        <span class="badge hidden" id="creditBadge">0</span>
      </div>
      <div class="pos-tab" data-tab="food" onclick="switchPosTab('food')">
        <i data-lucide="utensils" class="w-4 h-4"></i>
        <span>Food</span>
      </div>
      <div class="pos-tab" data-tab="more" onclick="switchPosTab('more')">
        <i data-lucide="menu" class="w-4 h-4"></i>
        <span>More</span>
      </div>
    </div>
    
    <!-- Content Panels -->
    <div class="pos-content">
      
      <!-- RECHARGE PANEL -->
      <div id="rechargePanel" class="pos-panel active">
        
        <!-- Member Input -->
        <div class="pos-card">
          <div class="pos-card-title"><i data-lucide="user" class="w-3 h-3"></i> Member / Guest</div>
          <div style="position: relative;">
            <input type="text" id="memberInput" class="member-input" placeholder="Type name..." autocomplete="off"/>
            <div id="suggestions" class="suggestions"></div>
          </div>
        </div>
        
        <!-- Quick Amounts -->
        <div class="pos-card" style="flex: 1;">
          <div class="pos-card-title"><i data-lucide="zap" class="w-3 h-3"></i> Amount</div>
          <div class="amount-grid">
            <button class="amount-btn" data-amount="20"><div class="value">‚Çπ20</div><div class="label">12m</div></button>
            <button class="amount-btn" data-amount="40"><div class="value">‚Çπ40</div><div class="label">24m</div></button>
            <button class="amount-btn" data-amount="50"><div class="value">‚Çπ50</div><div class="label">30m</div></button>
            <button class="amount-btn" data-amount="80"><div class="value">‚Çπ80</div><div class="label">48m</div></button>
            <button class="amount-btn" data-amount="100"><div class="value">‚Çπ100</div><div class="label">1h</div></button>
            <button class="amount-btn" data-amount="180"><div class="value">‚Çπ180</div><div class="label">1h48m</div></button>
            <button class="amount-btn" data-amount="200"><div class="value">‚Çπ200</div><div class="label">2h</div></button>
            <button class="amount-btn combo" data-amount="200" data-free="40" onclick="selectCombo(200, 40)"><div class="value">‚Çπ200</div><div class="label" style="color: var(--pos-yellow);">+40 free</div></button>
            <button class="amount-btn combo" data-amount="300" data-free="60" onclick="selectCombo(300, 60)"><div class="value">‚Çπ300</div><div class="label" style="color: var(--pos-yellow);">+60 free</div></button>
            <div class="amount-btn" style="border-style: dashed;">
              <input type="number" id="customAmount" class="custom-input" placeholder="‚Çπ..." min="10"/>
              <div class="label">Custom</div>
            </div>
          </div>
          
          <!-- Free Amount -->
          <div class="flex items-center gap-3 mt-3 p-2 rounded-lg" style="background: rgba(255,255,0,0.05); border: 1px solid rgba(255,255,0,0.2);">
            <span class="text-xs" style="color: var(--pos-yellow);">üéÅ Free:</span>
            <input type="number" id="freeAmount" class="split-input" style="color: var(--pos-yellow); border-color: var(--pos-yellow); max-width: 80px;" placeholder="0" min="0"/>
            <span class="text-xs text-gray-500">(Offer/Bonus)</span>
          </div>
        </div>
        
        <!-- Payment Mode -->
        <div class="pos-card">
          <div class="pos-card-title"><i data-lucide="wallet" class="w-3 h-3"></i> Payment Mode</div>
          <div class="payment-toggle">
            <div class="payment-opt cash selected" onclick="selectPaymentMode('cash')">üíµ Cash</div>
            <div class="payment-opt upi" onclick="selectPaymentMode('upi')">üì± UPI</div>
            <div class="payment-opt split" onclick="selectPaymentMode('split')">‚úÇÔ∏è Split</div>
            <div class="payment-opt credit" onclick="selectPaymentMode('credit')">‚è∞ Credit</div>
          </div>
          
          <!-- Split Payment Fields (hidden by default) -->
          <div id="splitFields" class="split-payment mt-3 hidden">
            <div class="split-box cash">
              <label>üíµ Cash</label>
              <input type="number" id="splitCash" class="split-input" placeholder="0" min="0" oninput="updateSplitTotal()"/>
            </div>
            <div class="split-box upi">
              <label>üì± UPI</label>
              <input type="number" id="splitUpi" class="split-input" placeholder="0" min="0" oninput="updateSplitTotal()"/>
            </div>
          </div>
        </div>
        
        <!-- Summary & Confirm -->
        <div class="summary-row">
          <div class="summary-box">
            <div class="total" id="totalDisplay">‚Çπ0</div>
            <div class="breakdown" id="breakdownDisplay">Select amount</div>
          </div>
          <button id="confirmBtn" class="confirm-btn" onclick="confirmRecharge()" disabled>
            ‚úì ADD
          </button>
        </div>
      </div>
      
      <!-- BOOKINGS PANEL -->
      <div id="bookingsPanel" class="pos-panel">
        
        <!-- Pending Bookings -->
        <div class="pos-card">
          <div class="pos-card-title" style="color: var(--pos-yellow);">
            <i data-lucide="clock" class="w-3 h-3"></i> Pending Approval
          </div>
          <div id="pendingBookings" class="space-y-2" style="max-height: 120px; overflow-y: auto;">
            <div class="empty-state">
              <i data-lucide="check-circle" class="w-6 h-6"></i>
              <p class="text-xs">No pending</p>
            </div>
          </div>
        </div>
        
        <!-- Ongoing Sessions -->
        <div class="pos-card">
          <div class="pos-card-title" style="color: var(--pos-green);">
            <i data-lucide="play-circle" class="w-3 h-3"></i> Active Now
          </div>
          <div id="ongoingBookings" class="space-y-2" style="max-height: 120px; overflow-y: auto;">
            <div class="empty-state">
              <i data-lucide="users" class="w-6 h-6"></i>
              <p class="text-xs">No active sessions</p>
            </div>
          </div>
        </div>
        
        <!-- Upcoming (Today + Tomorrow) -->
        <div class="pos-card" style="flex: 1; display: flex; flex-direction: column; min-height: 0;">
          <div class="pos-card-title" style="color: var(--pos-cyan);">
            <i data-lucide="calendar-check" class="w-3 h-3"></i> Upcoming (Today & Tomorrow)
          </div>
          <div id="todayBookings" class="space-y-2" style="flex: 1; overflow-y: auto; min-height: 0;">
            <div class="empty-state">
              <i data-lucide="calendar-x" class="w-6 h-6"></i>
              <p class="text-xs">No upcoming bookings</p>
            </div>
          </div>
        </div>
        
        <!-- Completed Today -->
        <div class="pos-card">
          <div class="pos-card-title" style="color: #888;">
            <i data-lucide="check-circle" class="w-3 h-3"></i> Completed Today
          </div>
          <div id="pastBookings" class="space-y-2" style="max-height: 100px; overflow-y: auto;">
            <div class="empty-state">
              <i data-lucide="check-circle" class="w-6 h-6"></i>
              <p class="text-xs">No completed sessions</p>
            </div>
          </div>
        </div>
        
      </div>
      
      <!-- CREDITS PANEL -->
      <div id="creditsPanel" class="pos-panel">
        
        <!-- Outstanding Credits -->
        <div class="pos-card" style="flex: 1;">
          <div class="pos-card-title" style="color: var(--pos-orange);">
            <i data-lucide="alert-circle" class="w-3 h-3"></i> Outstanding Credits
          </div>
          <div id="creditsList" class="space-y-2" style="max-height: 400px; overflow-y: auto;">
            <div class="empty-state">
              <i data-lucide="check-circle" class="w-8 h-8"></i>
              <p class="text-sm">No outstanding credits</p>
            </div>
          </div>
        </div>
        
        <!-- Credit Summary -->
        <div class="pos-card">
          <div class="pos-card-title">Credit Summary</div>
          <div class="grid grid-cols-2 gap-3">
            <div class="text-center p-3 rounded-lg" style="background: rgba(255,0,68,0.1);">
              <div class="font-orbitron text-xl font-bold" id="totalCredits" style="color: var(--pos-red);">‚Çπ0</div>
              <div class="text-xs text-gray-500">Total Outstanding</div>
            </div>
            <div class="text-center p-3 rounded-lg" style="background: rgba(0,255,136,0.1);">
              <div class="font-orbitron text-xl font-bold" id="collectedToday" style="color: var(--pos-green);">‚Çπ0</div>
              <div class="text-xs text-gray-500">Collected Today</div>
            </div>
          </div>
        </div>
        
      </div>
      
      <!-- FOOD PANEL -->
      <div id="foodPanel" class="pos-panel">
        
        <!-- Customer Selection -->
        <div class="pos-card">
          <div class="pos-card-title"><i data-lucide="user" class="w-3 h-3"></i> Customer</div>
          <div style="position: relative;">
            <input id="foodCustomerInput" type="text" 
              placeholder="Search member or type name..." 
              class="w-full px-3 py-2 rounded-lg text-sm"
              style="background: rgba(0,0,0,0.4); border: 1px solid rgba(255,107,0,0.3); color: white;"
              oninput="searchFoodCustomer(this.value)"
              onfocus="showFoodCustomerSuggestions()"
              autocomplete="off">
            <div id="foodCustomerSuggestions" class="hidden"></div>
          </div>
          <div class="flex gap-2 mt-2">
            <button onclick="setFoodCustomer('Counter')" class="food-quick-customer">Counter</button>
            <button onclick="setFoodCustomer('Walk-in')" class="food-quick-customer">Walk-in</button>
          </div>
        </div>
        
        <!-- Menu Items -->
        <div class="pos-card" style="flex: 1; min-height: 0; overflow: hidden; display: flex; flex-direction: column;">
          <div class="pos-card-title" style="flex-shrink: 0;">
            <i data-lucide="utensils" class="w-3 h-3"></i> Menu
            <div class="food-category-tabs">
              <button class="food-cat active" data-cat="all" onclick="filterFoodMenu('all')">All</button>
              <button class="food-cat" data-cat="snacks" onclick="filterFoodMenu('snacks')">üçø</button>
              <button class="food-cat" data-cat="drinks" onclick="filterFoodMenu('drinks')">ü•§</button>
              <button class="food-cat" data-cat="meals" onclick="filterFoodMenu('meals')">üçΩÔ∏è</button>
              <button class="food-cat" data-cat="combos" onclick="filterFoodMenu('combos')">üéÅ</button>
            </div>
          </div>
          <div id="foodMenuItems" class="food-menu-grid">
            <div class="empty-state">
              <i data-lucide="utensils" class="w-8 h-8"></i>
              <p class="text-sm">Loading menu...</p>
            </div>
          </div>
        </div>
        
        <!-- Cart -->
        <div class="pos-card food-cart">
          <div class="pos-card-title" style="display: flex; justify-content: space-between; align-items: center;">
            <span><i data-lucide="shopping-cart" class="w-3 h-3 inline"></i> Cart</span>
            <button onclick="clearFoodCart()" class="text-xs text-gray-500 hover:text-red-400">Clear</button>
          </div>
          <div id="foodCartItems" class="food-cart-items">
            <div class="empty-state py-2">
              <p class="text-xs text-gray-500">Cart is empty</p>
            </div>
          </div>
          <div class="food-cart-total">
            <span>Total:</span>
            <span id="foodCartTotal" class="font-orbitron text-lg" style="color: var(--pos-green);">‚Çπ0</span>
          </div>
          
          <!-- Payment Mode -->
          <div class="payment-toggle mt-2">
            <button class="food-pay-btn active" data-mode="cash" onclick="setFoodPaymentMode('cash')">üíµ Cash</button>
            <button class="food-pay-btn" data-mode="upi" onclick="setFoodPaymentMode('upi')">üì± UPI</button>
            <button class="food-pay-btn" data-mode="split" onclick="setFoodPaymentMode('split')">‚úÇÔ∏è Split</button>
            <button class="food-pay-btn" data-mode="credit" onclick="setFoodPaymentMode('credit')">‚è∞ Credit</button>
          </div>
          
          <!-- Split Fields (hidden by default) -->
          <div id="foodSplitFields" class="hidden mt-2">
            <div class="grid grid-cols-2 gap-2">
              <div>
                <label class="text-xs text-gray-400 block mb-1">üíµ Cash</label>
                <input type="number" id="foodSplitCash" placeholder="‚Çπ0" class="split-input" oninput="updateFoodSplitTotal()">
              </div>
              <div>
                <label class="text-xs text-gray-400 block mb-1">üì± UPI</label>
                <input type="number" id="foodSplitUpi" placeholder="‚Çπ0" class="split-input" oninput="updateFoodSplitTotal()">
              </div>
            </div>
          </div>
          
          <button onclick="completeFoodSale()" class="food-checkout-btn">
            <i data-lucide="check-circle" class="w-5 h-5 inline mr-2"></i>
            Complete Sale
          </button>
        </div>
        
      </div>
      
      <!-- MORE PANEL -->
      <div id="morePanel" class="pos-panel">
        
        <!-- Quick Actions -->
        <div class="pos-card">
          <div class="pos-card-title"><i data-lucide="zap" class="w-3 h-3"></i> Quick Actions</div>
          <div class="quick-actions">
            <a href="dashboard.html" class="quick-action">
              <i data-lucide="layout-dashboard" class="w-5 h-5 mx-auto"></i>
              Dashboard
            </a>
            <div class="quick-action" onclick="refreshData()">
              <i data-lucide="rotate-cw" class="w-5 h-5 mx-auto"></i>
              Refresh
            </div>
          </div>
        </div>
        
        <!-- Today's Summary -->
        <div class="pos-card">
          <div class="pos-card-title">üìä Today's Summary</div>
          <div class="grid grid-cols-2 gap-3">
            <div class="text-center p-3 rounded-lg" style="background: rgba(0,240,255,0.1);">
              <div class="font-orbitron text-xl font-bold" id="summaryCash" style="color: var(--pos-cyan);">‚Çπ0</div>
              <div class="text-xs text-gray-500">Cash Collected</div>
            </div>
            <div class="text-center p-3 rounded-lg" style="background: rgba(184,41,255,0.1);">
              <div class="font-orbitron text-xl font-bold" id="summaryUpi" style="color: var(--pos-purple);">‚Çπ0</div>
              <div class="text-xs text-gray-500">UPI Collected</div>
            </div>
            <div class="text-center p-3 rounded-lg" style="background: rgba(255,0,68,0.1);">
              <div class="font-orbitron text-xl font-bold" id="summaryPending" style="color: var(--pos-red);">‚Çπ0</div>
              <div class="text-xs text-gray-500">Pending Collection</div>
            </div>
            <div class="text-center p-3 rounded-lg" style="background: rgba(0,255,136,0.1);">
              <div class="font-orbitron text-xl font-bold" id="summaryTotal" style="color: var(--pos-green);">‚Çπ0</div>
              <div class="text-xs text-gray-500">Total Collected</div>
            </div>
          </div>
        </div>
        
        <!-- Recent Transactions -->
        <div class="pos-card" style="flex: 1; display: flex; flex-direction: column; min-height: 0; overflow: hidden;">
          <div class="pos-card-title" style="flex-shrink: 0;">üïê Recent Transactions</div>
          <div id="recentList" class="space-y-1" style="flex: 1; overflow-y: auto; overflow-x: hidden; min-height: 0;">
            <div class="empty-state">
              <p class="text-sm">No transactions yet</p>
            </div>
          </div>
        </div>
        
      </div>
      
    </div>
    
    <!-- Stats Bar -->
    <div class="stats-bar">
      <div class="stat-item">
        <div class="value" id="statCash" style="color: var(--pos-cyan);">‚Çπ0</div>
        <div class="label">Cash</div>
      </div>
      <div class="stat-item">
        <div class="value" id="statUpi" style="color: var(--pos-purple);">‚Çπ0</div>
        <div class="label">UPI</div>
      </div>
      <div class="stat-item">
        <div class="value" id="statPending" style="color: var(--pos-red);">‚Çπ0</div>
        <div class="label">Pending</div>
      </div>
      <div class="stat-item">
        <div class="value" id="statCount" style="color: var(--pos-green);">0</div>
        <div class="label">TXN</div>
      </div>
    </div>
    
  </div>

  <!-- Credit Collection Modal -->
  <div id="collectModal" class="pos-modal hidden">
    <div class="modal-content">
      <div class="modal-title">üí∞ Collect Credit</div>
      <div id="collectMemberName" class="text-center font-orbitron text-lg mb-2" style="color: var(--pos-cyan);">-</div>
      <div id="collectAmount" class="text-center font-orbitron text-2xl mb-4" style="color: var(--pos-red);">‚Çπ0</div>
      
      <div class="pos-card-title">Payment Mode</div>
      <div class="split-payment mb-4">
        <div class="split-box cash">
          <label>üíµ Cash</label>
          <input type="number" id="collectCash" class="split-input" placeholder="0" min="0" oninput="updateCollectTotal()"/>
        </div>
        <div class="split-box upi">
          <label>üì± UPI</label>
          <input type="number" id="collectUpi" class="split-input" placeholder="0" min="0" oninput="updateCollectTotal()"/>
        </div>
      </div>
      
      <div class="text-center mb-4">
        <span class="text-gray-500 text-sm">Collecting: </span>
        <span id="collectTotal" class="font-orbitron" style="color: var(--pos-green);">‚Çπ0</span>
      </div>
      
      <div class="flex gap-3">
        <button onclick="closeCollectModal()" class="flex-1 py-2 rounded-lg border border-gray-700 text-gray-400">Cancel</button>
        <button id="collectBtn" onclick="confirmCollect()" class="flex-1 py-2 rounded-lg font-semibold" style="background: var(--pos-green); color: #000;">Collect</button>
      </div>
    </div>
  </div>

  <!-- Success Flash -->
  <div id="successFlash" class="success-flash" style="display: none;">
    <div class="icon">‚úì</div>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  
  <!-- POS Counter Logic -->
  <script type="module" src="js/counter.js"></script>
</body>
</html>
