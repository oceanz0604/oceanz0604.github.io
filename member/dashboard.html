<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>OceanZ - Member Dashboard</title>
  
  <!-- PWA Meta Tags -->
  <meta name="description" content="OceanZ Gaming Cafe - Your gaming stats and bookings"/>
  <meta name="theme-color" content="#00f0ff"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
  <meta name="apple-mobile-web-app-title" content="OceanZ"/>
  <link rel="manifest" href="../manifest.webmanifest"/>
  <link rel="icon" type="image/svg+xml" href="../assets/icons/icon.svg"/>
  <link rel="apple-touch-icon" href="../assets/icons/icon.svg"/>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../assets/css/common.css">
  <link rel="stylesheet" href="../assets/css/member.css">
  <style>
    :root {
      --neon-cyan: #00f0ff;
      --neon-pink: #ff00ff;
      --neon-purple: #b829ff;
      --neon-green: #00ff88;
      --neon-orange: #ff6b00;
      --neon-yellow: #ffff00;
      --dark-bg: #0a0a0f;
      --card-bg: rgba(15, 15, 25, 0.85);
      --card-border: rgba(0, 240, 255, 0.2);
    }

    * { font-family: 'Rajdhani', sans-serif; }
    .font-orbitron { font-family: 'Orbitron', sans-serif; }

    body {
      background: var(--dark-bg);
      background-image: 
        linear-gradient(rgba(0, 240, 255, 0.02) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 240, 255, 0.02) 1px, transparent 1px);
      background-size: 40px 40px;
    }

    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(ellipse at 0% 0%, rgba(0, 240, 255, 0.1) 0%, transparent 40%),
        radial-gradient(ellipse at 100% 100%, rgba(255, 0, 255, 0.08) 0%, transparent 40%);
      pointer-events: none;
      z-index: 0;
    }

    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    .hide-scrollbar::-webkit-scrollbar { display: none; }

    /* Neon Card Styles */
    .neon-card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      box-shadow: 0 0 30px rgba(0, 240, 255, 0.05);
      backdrop-filter: blur(10px);
      position: relative;
    }

    .neon-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--neon-cyan), transparent);
      opacity: 0.5;
    }

    .neon-card-pink::before {
      background: linear-gradient(90deg, transparent, var(--neon-pink), transparent);
    }

    .neon-card-purple::before {
      background: linear-gradient(90deg, transparent, var(--neon-purple), transparent);
    }

    .neon-card-green::before {
      background: linear-gradient(90deg, transparent, var(--neon-green), transparent);
    }

    /* Glow Effects */
    .glow-cyan { text-shadow: 0 0 10px var(--neon-cyan), 0 0 20px var(--neon-cyan); }
    .glow-pink { text-shadow: 0 0 10px var(--neon-pink), 0 0 20px var(--neon-pink); }
    .glow-purple { text-shadow: 0 0 10px var(--neon-purple), 0 0 20px var(--neon-purple); }
    .glow-green { text-shadow: 0 0 10px var(--neon-green), 0 0 20px var(--neon-green); }
    .glow-orange { text-shadow: 0 0 10px var(--neon-orange), 0 0 20px var(--neon-orange); }
    .glow-yellow { text-shadow: 0 0 10px var(--neon-yellow), 0 0 20px var(--neon-yellow); }

    /* Tab Bar */
    .tab-bar {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      backdrop-filter: blur(10px);
    }

    .tab-btn {
      position: relative;
      transition: all 0.3s ease;
      color: #6b7280;
      border: 1px solid transparent;
    }

    .tab-btn:hover {
      color: var(--neon-cyan);
      background: rgba(0, 240, 255, 0.05);
    }

    .tab-btn.active {
      color: var(--neon-cyan);
      background: rgba(0, 240, 255, 0.1);
      border-color: var(--neon-cyan);
      box-shadow: 0 0 15px rgba(0, 240, 255, 0.3);
    }

    /* Neon Button */
    .neon-btn {
      background: linear-gradient(135deg, rgba(0, 240, 255, 0.2), rgba(184, 41, 255, 0.2));
      border: 1px solid var(--neon-cyan);
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .neon-btn:hover {
      background: linear-gradient(135deg, var(--neon-cyan), var(--neon-purple));
      box-shadow: 0 0 20px rgba(0, 240, 255, 0.5);
      transform: translateY(-2px);
    }

    .neon-btn-green {
      background: linear-gradient(135deg, rgba(0, 255, 136, 0.2), rgba(0, 200, 100, 0.2));
      border-color: var(--neon-green);
    }

    .neon-btn-green:hover {
      background: linear-gradient(135deg, var(--neon-green), #00cc66);
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
    }

    .neon-btn-pink {
      background: linear-gradient(135deg, rgba(255, 0, 255, 0.2), rgba(184, 41, 255, 0.2));
      border-color: var(--neon-pink);
    }

    .neon-btn-pink:hover {
      background: linear-gradient(135deg, var(--neon-pink), var(--neon-purple));
      box-shadow: 0 0 20px rgba(255, 0, 255, 0.5);
    }

    /* Input Styles */
    .neon-input {
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(0, 240, 255, 0.3);
      transition: all 0.3s ease;
    }

    .neon-input:focus {
      border-color: var(--neon-cyan);
      box-shadow: 0 0 15px rgba(0, 240, 255, 0.3);
      outline: none;
    }

    .neon-select {
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(0, 240, 255, 0.3);
    }

    .neon-select:focus {
      border-color: var(--neon-cyan);
      box-shadow: 0 0 15px rgba(0, 240, 255, 0.3);
      outline: none;
    }

    /* Avatar Ring */
    .avatar-ring {
      border: 3px solid var(--neon-cyan);
      box-shadow: 0 0 20px rgba(0, 240, 255, 0.5);
      animation: ring-pulse 2s ease-in-out infinite;
    }

    @keyframes ring-pulse {
      0%, 100% { box-shadow: 0 0 20px rgba(0, 240, 255, 0.5); }
      50% { box-shadow: 0 0 30px rgba(0, 240, 255, 0.8); }
    }

    /* Stat Card */
    .stat-card {
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(0, 240, 255, 0.2);
      position: relative;
      overflow: hidden;
    }

    .stat-card::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, var(--neon-cyan), var(--neon-purple));
    }

    /* Leaderboard Item */
    .leaderboard-item {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(0, 240, 255, 0.1);
      transition: all 0.3s ease;
    }

    .leaderboard-item:hover {
      border-color: var(--neon-cyan);
      background: rgba(0, 240, 255, 0.05);
      transform: translateX(5px);
    }

    .leaderboard-item.highlight {
      border-color: var(--neon-green);
      background: rgba(0, 255, 136, 0.1);
    }

    /* Rank Badge */
    .rank-badge {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      border-radius: 8px;
    }

    .rank-1 { background: linear-gradient(135deg, #ffd700, #ffaa00); color: #000; }
    .rank-2 { background: linear-gradient(135deg, #c0c0c0, #a0a0a0); color: #000; }
    .rank-3 { background: linear-gradient(135deg, #cd7f32, #b5651d); color: #fff; }

    /* PC Button */
    .pc-btn {
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(0, 240, 255, 0.3);
      transition: all 0.3s ease;
    }

    .pc-btn:hover {
      border-color: var(--neon-cyan);
      background: rgba(0, 240, 255, 0.1);
    }

    .pc-btn.selected {
      border-color: var(--neon-green);
      background: rgba(0, 255, 136, 0.2);
      box-shadow: 0 0 15px rgba(0, 255, 136, 0.4);
    }

    /* Date Button */
    .date-btn {
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(0, 240, 255, 0.3);
      transition: all 0.3s ease;
    }

    .date-btn:hover {
      border-color: var(--neon-cyan);
    }

    .date-btn.selected {
      border-color: var(--neon-cyan);
      background: rgba(0, 240, 255, 0.2);
      box-shadow: 0 0 15px rgba(0, 240, 255, 0.4);
    }

    /* History Card */
    .history-card {
      background: rgba(0, 0, 0, 0.3);
      border-left: 3px solid var(--neon-purple);
      transition: all 0.3s ease;
    }

    .history-card:hover {
      background: rgba(0, 240, 255, 0.05);
      border-left-color: var(--neon-cyan);
    }

    /* Booking Card */
    .booking-card {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(0, 240, 255, 0.2);
      transition: all 0.3s ease;
    }

    .booking-card:hover {
      border-color: var(--neon-cyan);
      transform: translateY(-2px);
    }

    /* Status Badges */
    .status-approved { 
      background: rgba(0, 255, 136, 0.2); 
      border: 1px solid var(--neon-green);
      color: var(--neon-green);
    }
    .status-pending { 
      background: rgba(255, 255, 0, 0.2); 
      border: 1px solid var(--neon-yellow);
      color: var(--neon-yellow);
    }
    .status-declined { 
      background: rgba(255, 0, 100, 0.2); 
      border: 1px solid #ff0064;
      color: #ff0064;
    }
    .status-expired { 
      background: rgba(100, 100, 100, 0.2); 
      border: 1px solid #666;
      color: #888;
    }

    /* Logout Button */
    .logout-btn {
      background: rgba(255, 0, 100, 0.1);
      border: 1px solid rgba(255, 0, 100, 0.5);
      transition: all 0.3s ease;
    }

    .logout-btn:hover {
      background: rgba(255, 0, 100, 0.3);
      box-shadow: 0 0 15px rgba(255, 0, 100, 0.4);
    }

    /* Sidebar Styles */
    .member-sidebar {
      background: rgba(10, 10, 15, 0.98);
      border-right: 1px solid var(--card-border);
      backdrop-filter: blur(20px);
      transition: transform 0.3s ease;
    }

    .member-sidebar-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(3px);
      z-index: 55;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    .member-sidebar-backdrop.active {
      opacity: 1;
      pointer-events: auto;
    }

    .nav-item {
      transition: all 0.2s ease;
      border-left: 3px solid transparent;
    }

    .nav-item:hover {
      background: rgba(0, 240, 255, 0.1);
      border-left-color: var(--neon-cyan);
    }

    .nav-item.active {
      background: rgba(0, 240, 255, 0.15);
      border-left-color: var(--neon-cyan);
      color: var(--neon-cyan) !important;
    }

    /* Scrollbar for sidebar */
    .scrollbar-thin::-webkit-scrollbar { width: 4px; }
    .scrollbar-thin::-webkit-scrollbar-track { background: transparent; }
    .scrollbar-thin::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 2px; }
    .scrollbar-thin::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.2); }

    @media (max-width: 768px) {
      .member-sidebar {
        transform: translateX(-100%);
      }
      .member-sidebar.open {
        transform: translateX(0);
      }
    }

    /* Cyber Lines */
    .cyber-line {
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--neon-cyan), transparent);
    }

    .cyber-line-vertical {
      width: 1px;
      background: linear-gradient(180deg, transparent, var(--neon-cyan), transparent);
    }

    /* Scanline Effect */
    .scanline::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.1) 0px,
        rgba(0, 0, 0, 0.1) 1px,
        transparent 1px,
        transparent 2px
      );
      pointer-events: none;
      opacity: 0.3;
    }

    /* Modal */
    .modal-bg {
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(5px);
    }

    .modal-card {
      background: var(--card-bg);
      border: 1px solid var(--neon-pink);
      box-shadow: 0 0 40px rgba(255, 0, 255, 0.3);
    }

    /* Animations */
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    .float-animation {
      animation: float 3s ease-in-out infinite;
    }

    /* Chart container */
    .chart-container {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(0, 240, 255, 0.1);
      border-radius: 12px;
      padding: 1rem;
    }

    /* Season Banner */
    .glow-pink {
      text-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff;
    }

    /* Highlight for current user */
    .leaderboard-item.highlight {
      background: rgba(0, 255, 136, 0.15) !important;
      border: 1px solid var(--neon-green) !important;
      box-shadow: 0 0 15px rgba(0, 255, 136, 0.2);
    }

    /* ==================== MOBILE UI ENHANCEMENTS ==================== */
    
    @media (max-width: 768px) {
      html { font-size: 14px; }
      
      /* Mobile main content */
      .main-content {
        padding: 1rem !important;
        margin-left: 0 !important;
      }
      
      /* Mobile sidebar improvements */
      .member-sidebar {
        width: 85vw !important;
        max-width: 300px;
      }
      
      .member-sidebar .nav-item {
        padding: 14px 16px !important;
      }
      
      /* Mobile header */
      .sticky.top-0.z-30 {
        padding: 12px 16px !important;
      }
      
      /* Better touch targets */
      button, .nav-item, .neon-btn {
        min-height: 44px;
      }
      
      /* Stat cards mobile */
      .grid-cols-2.md\\:grid-cols-4 {
        gap: 10px !important;
      }
      
      .stat-card {
        padding: 12px !important;
      }
      
      .stat-card .text-2xl,
      .stat-card .text-xl {
        font-size: 1.1rem !important;
      }
      
      /* Neon cards */
      .neon-card {
        padding: 1rem !important;
        border-radius: 12px !important;
      }
      
      /* Typography scaling */
      h1, .text-3xl { font-size: 1.5rem !important; }
      h2, .text-2xl { font-size: 1.25rem !important; }
      
      /* Input fields - prevent iOS zoom */
      input, select, textarea {
        font-size: 16px !important;
      }
      
      /* Chart container mobile */
      .chart-container {
        padding: 0.75rem !important;
      }
      
      .chart-container canvas {
        max-height: 200px !important;
      }
      
      /* Session history cards */
      .session-card {
        padding: 12px !important;
      }
      
      /* Leaderboard items */
      .leaderboard-item {
        padding: 12px !important;
      }
      
      /* Booking form mobile */
      .grid.gap-4 {
        gap: 12px !important;
      }
      
      /* Modal mobile */
      .modal-card {
        margin: 1rem !important;
        padding: 1.25rem !important;
        max-height: calc(100vh - 2rem);
        overflow-y: auto;
      }
      
      /* Tab content spacing */
      .tab-pane {
        padding: 0 !important;
      }
      
      /* PWA Install banner mobile */
      #pwaInstallBanner {
        bottom: 0 !important;
        left: 0 !important;
        right: 0 !important;
        border-radius: 16px 16px 0 0 !important;
      }
    }
    
    /* Small mobile screens */
    @media (max-width: 374px) {
      html { font-size: 13px; }
      
      .stat-card .text-2xl {
        font-size: 1rem !important;
      }
    }
    
    /* Safe area insets for notched devices */
    @supports (padding: env(safe-area-inset-bottom)) {
      @media (max-width: 768px) {
        .main-content {
          padding-bottom: calc(1rem + env(safe-area-inset-bottom)) !important;
        }
        
        #pwaInstallBanner {
          padding-bottom: calc(16px + env(safe-area-inset-bottom)) !important;
        }
      }
    }
    
    /* Touch device optimizations */
    @media (hover: none) and (pointer: coarse) {
      .neon-btn:hover,
      .nav-item:hover,
      .neon-card:hover {
        transform: none;
      }
      
      .neon-btn:active,
      .nav-item:active {
        transform: scale(0.98);
      }
    }
    
    /* Smooth animations */
    @media (prefers-reduced-motion: no-preference) {
      .member-sidebar {
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .member-sidebar-backdrop {
        transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
    }
  </style>
</head>
<body class="member-page text-white min-h-screen relative">

  <!-- Loading Screen -->
  <div id="loading-screen" class="min-h-screen flex items-center justify-center relative z-10">
    <div class="text-center">
      <div class="w-16 h-16 mx-auto mb-4 relative">
        <div class="absolute inset-0 border-3 border-transparent rounded-full animate-spin" 
          style="border-top-color: #00f0ff; border-right-color: #b829ff;"></div>
        <div class="absolute inset-2 border-2 border-transparent rounded-full animate-spin" 
          style="border-bottom-color: #00f0ff; border-left-color: #b829ff; animation-direction: reverse; animation-duration: 0.8s;"></div>
      </div>
      <p class="text-gray-400 font-orbitron text-sm tracking-wider">LOADING...</p>
    </div>
  </div>

  <!-- Main App (hidden until auth verified) -->
  <div id="main-app" class="hidden relative z-10 flex min-h-screen">
    
    <!-- Sidebar Backdrop (mobile) -->
    <div id="sidebar-backdrop" class="member-sidebar-backdrop md:hidden"></div>

    <!-- Sidebar -->
    <aside id="member-sidebar" class="member-sidebar w-64 fixed inset-y-0 left-0 z-[60] hidden md:flex flex-col p-4">
      <!-- Header with Close button (mobile only) -->
      <div class="flex items-center justify-between mb-4 md:mb-0">
        <span class="md:hidden text-xs text-gray-600 font-orbitron">MENU</span>
        <button id="sidebar-close" class="md:hidden w-8 h-8 flex items-center justify-center rounded-lg" 
          style="background: rgba(0,240,255,0.1); border: 1px solid rgba(0,240,255,0.3);" aria-label="Close menu">
          <i data-lucide="x" class="w-4 h-4" style="color: var(--neon-cyan);"></i>
        </button>
      </div>

      <!-- Logo + User Info (Horizontal like admin) -->
      <div class="mb-4 p-3 rounded-xl flex items-center gap-3" style="background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.05);">
        <!-- Logo -->
        <div class="w-10 h-10 shrink-0">
          <svg viewBox="0 0 100 100" class="w-full h-full">
            <polygon points="50,5 95,27.5 95,72.5 50,95 5,72.5 5,27.5" 
              fill="none" stroke="url(#sidebarGradient)" stroke-width="2"/>
            <defs>
              <linearGradient id="sidebarGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#00f0ff"/>
                <stop offset="100%" style="stop-color:#ff00ff"/>
              </linearGradient>
            </defs>
          </svg>
        </div>
        <!-- Branding + User -->
        <div class="flex-1 min-w-0">
          <div class="flex items-center gap-1">
            <span class="font-orbitron text-sm font-bold" style="color: var(--neon-cyan);">OCEANZ</span>
            <span class="text-xs text-gray-600">MEMBER</span>
          </div>
          <div id="sidebarUsername" class="font-orbitron text-xs truncate mt-0.5" style="color: var(--neon-pink);">-</div>
        </div>
      </div>

      <!-- Nav Items with scroll -->
      <nav id="memberNav" class="flex-1 space-y-2 overflow-y-auto scrollbar-thin" style="max-height: calc(100vh - 180px);">
        <a href="#" class="nav-item active flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400" data-tab="profile">
          <span class="text-lg">üë§</span>
          <span class="font-medium">Profile</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400" data-tab="leaderboard">
          <span class="text-lg">üèÜ</span>
          <span class="font-medium">Leaderboard</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400" data-tab="monthly">
          <span class="text-lg">üìÖ</span>
          <span class="font-medium">Monthly</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400" data-tab="seasonal">
          <span class="text-lg">üèÖ</span>
          <span class="font-medium">Seasons</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400" data-tab="analytics">
          <span class="text-lg">üìä</span>
          <span class="font-medium">Stats</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400" data-tab="booking">
          <span class="text-lg">üéÆ</span>
          <span class="font-medium">Book PC</span>
        </a>
        <a href="#" class="nav-item flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400" data-tab="history">
          <span class="text-lg">üìú</span>
          <span class="font-medium">History</span>
        </a>
      </nav>

      <!-- Footer -->
      <div class="pt-4 border-t border-gray-800">
        <button id="logoutBtn" class="logout-btn w-full flex items-center gap-3 px-4 py-3 rounded-lg text-red-400">
          <span class="text-lg">‚ö°</span>
          <span class="font-medium">Logout</span>
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 ml-0 md:ml-64 min-h-screen">
      <!-- Mobile Header -->
      <header class="member-mobile-header md:hidden">
        <button id="sidebar-toggle" class="member-hamburger-btn" aria-label="Toggle menu">
          <i data-lucide="menu" class="w-5 h-5"></i>
        </button>
        <div class="mobile-header-brand">
          <svg viewBox="0 0 100 100" class="w-7 h-7">
            <polygon points="50,5 95,27.5 95,72.5 50,95 5,72.5 5,27.5" 
              fill="none" stroke="url(#memberMobileGradient)" stroke-width="3"/>
            <defs>
              <linearGradient id="memberMobileGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#00f0ff"/>
                <stop offset="100%" style="stop-color:#ff00ff"/>
              </linearGradient>
            </defs>
          </svg>
          <div class="mobile-header-text">
            <span class="mobile-header-title" style="color: var(--neon-cyan);">OCEANZ</span>
            <span class="mobile-header-subtitle">MEMBER</span>
          </div>
        </div>
        <div id="mobile-member-avatar" class="mobile-member-avatar">
          <span class="mobile-avatar-initial">M</span>
        </div>
      </header>

      <!-- Tab Content -->
      <div id="tab-content" class="p-4 md:p-6 space-y-6">

      <!-- Profile Tab -->
      <div class="tab-pane space-y-6" data-tab="profile">
        <!-- Profile Header -->
        <div class="neon-card rounded-2xl p-6">
          <div class="flex items-center gap-5">
            <div class="relative float-animation">
              <img id="avatar" src="" alt="avatar" class="w-20 h-20 rounded-full avatar-ring">
            </div>
            <div class="flex-1">
              <div class="flex items-center gap-3 flex-wrap">
                <h1 id="memberName" class="font-orbitron text-2xl font-bold glow-cyan" style="color: var(--neon-cyan);"></h1>
                <span id="streakInfo" class="text-lg"></span>
              </div>
              <p id="memberUsername" class="text-gray-400 mt-1"></p>
            </div>
          </div>
        </div>

        <!-- Member Details -->
        <div class="neon-card neon-card-green rounded-2xl p-6">
          <h3 class="font-orbitron text-lg font-bold mb-4 glow-green" style="color: var(--neon-green);">
            ‚ö° PLAYER STATS
          </h3>
          <ul id="memberDetailsList" class="space-y-3 text-gray-300"></ul>
        </div>

        <!-- Recent Activity -->
        <div class="neon-card neon-card-purple rounded-2xl p-6">
          <h3 class="font-orbitron text-lg font-bold mb-4 glow-purple" style="color: var(--neon-purple);">
            üïπÔ∏è RECENT ACTIVITY
          </h3>
          <div id="recentActivity" class="space-y-3 text-gray-300">
            <p class="text-gray-500">Loading...</p>
          </div>
        </div>

        <!-- My Bookings -->
        <div class="neon-card neon-card-pink rounded-2xl p-6">
          <h3 class="font-orbitron text-lg font-bold mb-4 glow-pink" style="color: var(--neon-pink);">
            üéØ MY BOOKINGS
          </h3>
          <div id="myBookingsList" class="space-y-4"></div>
        </div>
      </div>

      <!-- Monthly Leaderboard -->
      <div class="tab-pane hidden" data-tab="monthly">
        <div class="neon-card rounded-2xl p-6 space-y-4">
          <h2 class="font-orbitron text-xl font-bold glow-cyan flex items-center gap-3" style="color: var(--neon-cyan);">
            <i data-lucide="calendar" class="w-6 h-6"></i> MONTHLY CHAMPIONS
          </h2>
          <p class="text-gray-400 text-sm">Top 10 grinders this month</p>
          <div class="cyber-line my-4"></div>
          <div id="monthlyLeaderboard" class="space-y-3"></div>
        </div>
      </div>

      <!-- Seasonal Leaderboards -->
      <div class="tab-pane hidden" data-tab="seasonal">
        <div class="space-y-6">
          <!-- Current Season Banner -->
          <div class="neon-card rounded-2xl p-6 relative overflow-hidden">
            <div class="absolute inset-0 opacity-20" style="background: linear-gradient(135deg, #ff0044 0%, #b829ff 50%, #00f0ff 100%);"></div>
            <div class="relative z-10">
              <div class="flex items-center justify-between flex-wrap gap-4">
                <div>
                  <h2 class="font-orbitron text-2xl font-bold glow-pink flex items-center gap-3" style="color: #ff00ff;">
                    üèÖ SEASON 1 - CYBER GRIND
                  </h2>
                  <p class="text-gray-300 mt-2">Compete for exclusive rewards and prizes!</p>
                </div>
                <div class="text-right">
                  <div class="text-xs text-gray-400 uppercase tracking-wider">Season Ends</div>
                  <div id="seasonTimer" class="font-orbitron text-xl" style="color: #00f0ff;">Loading...</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Prize Pool -->
          <div class="neon-card rounded-2xl p-6 relative">
            <h3 class="font-orbitron text-lg font-bold mb-4" style="color: #ffff00;">üéÅ SEASON REWARDS</h3>
            <div class="grid sm:grid-cols-3 gap-4">
              <div class="p-4 rounded-xl text-center" style="background: linear-gradient(135deg, rgba(255,215,0,0.2), rgba(255,165,0,0.1)); border: 1px solid #ffd700;">
                <div class="text-3xl mb-2">ü•á</div>
                <div class="font-orbitron font-bold text-lg" style="color: #ffd700;">1ST PLACE</div>
                <div class="text-sm text-gray-300 mt-2">‚Çπ500 Credit + Gold Badge</div>
                <div class="text-xs text-gray-500 mt-1">+ 5 Free Hours</div>
              </div>
              <div class="p-4 rounded-xl text-center" style="background: linear-gradient(135deg, rgba(192,192,192,0.2), rgba(150,150,150,0.1)); border: 1px solid #c0c0c0;">
                <div class="text-3xl mb-2">ü•à</div>
                <div class="font-orbitron font-bold text-lg" style="color: #c0c0c0;">2ND PLACE</div>
                <div class="text-sm text-gray-300 mt-2">‚Çπ300 Credit + Silver Badge</div>
                <div class="text-xs text-gray-500 mt-1">+ 3 Free Hours</div>
              </div>
              <div class="p-4 rounded-xl text-center" style="background: linear-gradient(135deg, rgba(205,127,50,0.2), rgba(180,100,30,0.1)); border: 1px solid #cd7f32;">
                <div class="text-3xl mb-2">ü•â</div>
                <div class="font-orbitron font-bold text-lg" style="color: #cd7f32;">3RD PLACE</div>
                <div class="text-sm text-gray-300 mt-2">‚Çπ200 Credit + Bronze Badge</div>
                <div class="text-xs text-gray-500 mt-1">+ 2 Free Hours</div>
              </div>
            </div>
          </div>

          <!-- Weekly Champions -->
          <div class="neon-card rounded-2xl p-6 relative">
            <h3 class="font-orbitron text-lg font-bold mb-4 flex items-center gap-3" style="color: #ff6b00;">
              <i data-lucide="flame" class="w-5 h-5"></i> WEEKLY CHAMPIONS
            </h3>
            <p class="text-gray-400 text-sm mb-4">This week's grinders ‚Ä¢ Resets every Monday</p>
            <div class="cyber-line my-4"></div>
            <div id="weeklyLeaderboard" class="space-y-3">
              <p class="text-gray-500 text-center">Loading weekly champions...</p>
            </div>
          </div>

          <!-- Season Standings -->
          <div class="neon-card rounded-2xl p-6 relative">
            <h3 class="font-orbitron text-lg font-bold mb-4 flex items-center gap-3" style="color: #b829ff;">
              <i data-lucide="crown" class="w-5 h-5"></i> SEASON STANDINGS
            </h3>
            <p class="text-gray-400 text-sm mb-4">Total playtime this season</p>
            <div class="cyber-line my-4"></div>
            <div id="seasonLeaderboard" class="space-y-3">
              <p class="text-gray-500 text-center">Loading season standings...</p>
            </div>
          </div>

          <!-- Past Champions -->
          <div class="neon-card rounded-2xl p-6 relative">
            <h3 class="font-orbitron text-lg font-bold mb-4 flex items-center gap-3" style="color: #00ff88;">
              <i data-lucide="history" class="w-5 h-5"></i> PAST CHAMPIONS
            </h3>
            <div id="pastChampions" class="grid sm:grid-cols-2 gap-4">
              <div class="p-4 rounded-xl" style="background: rgba(0,0,0,0.3); border-left: 3px solid #00f0ff;">
                <div class="text-xs text-gray-500 uppercase tracking-wider">December 2025</div>
                <div class="font-orbitron font-bold mt-1" style="color: #00f0ff;">üèÜ Coming Soon</div>
                <div class="text-sm text-gray-400 mt-1">First season in progress!</div>
              </div>
            </div>
          </div>

          <!-- Your Season Stats -->
          <div class="neon-card rounded-2xl p-6 relative">
            <h3 class="font-orbitron text-lg font-bold mb-4" style="color: #00f0ff;">üìä YOUR SEASON PROGRESS</h3>
            <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
              <div class="stat-card p-4 rounded-xl text-center">
                <div class="text-gray-400 text-xs uppercase tracking-wider">Rank</div>
                <div id="seasonRank" class="text-2xl font-bold font-orbitron mt-1" style="color: #ffff00;">#-</div>
              </div>
              <div class="stat-card p-4 rounded-xl text-center">
                <div class="text-gray-400 text-xs uppercase tracking-wider">Playtime</div>
                <div id="seasonPlaytime" class="text-2xl font-bold font-orbitron mt-1" style="color: #00f0ff;">-</div>
              </div>
              <div class="stat-card p-4 rounded-xl text-center">
                <div class="text-gray-400 text-xs uppercase tracking-wider">Sessions</div>
                <div id="seasonSessions" class="text-2xl font-bold font-orbitron mt-1" style="color: #b829ff;">-</div>
              </div>
              <div class="stat-card p-4 rounded-xl text-center">
                <div class="text-gray-400 text-xs uppercase tracking-wider">Best Streak</div>
                <div id="seasonStreak" class="text-2xl font-bold font-orbitron mt-1" style="color: #ff6b00;">-</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Leaderboard -->
      <div class="tab-pane hidden" data-tab="leaderboard">
        <div class="neon-card rounded-2xl p-6 space-y-4">
          <h2 class="font-orbitron text-xl font-bold glow-yellow flex items-center gap-3" style="color: var(--neon-yellow);">
            <i data-lucide="trophy" class="w-6 h-6"></i> HALL OF FAME
          </h2>
          <div class="cyber-line my-4"></div>
          <div id="leaderboardList" class="space-y-3"></div>
        </div>
      </div>

      <!-- Analytics -->
      <div class="tab-pane hidden" data-tab="analytics">
        <div class="neon-card rounded-2xl p-6 space-y-6">
          <h2 class="font-orbitron text-xl font-bold glow-cyan flex items-center gap-3" style="color: var(--neon-cyan);">
            <i data-lucide="bar-chart-3" class="w-6 h-6"></i> PLAYER ANALYTICS
          </h2>

          <!-- Stats Grid -->
          <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
            <div class="stat-card p-4 rounded-xl text-center">
              <div class="text-gray-400 text-xs uppercase tracking-wider">Sessions</div>
              <div id="totalSessions" class="text-2xl font-bold font-orbitron mt-1" style="color: var(--neon-cyan);">-</div>
            </div>
            <div class="stat-card p-4 rounded-xl text-center">
              <div class="text-gray-400 text-xs uppercase tracking-wider">Minutes</div>
              <div id="totalMinutes" class="text-2xl font-bold font-orbitron mt-1" style="color: var(--neon-purple);">-</div>
            </div>
            <div class="stat-card p-4 rounded-xl text-center">
              <div class="text-gray-400 text-xs uppercase tracking-wider">Spent</div>
              <div id="totalSpent" class="text-2xl font-bold font-orbitron mt-1" style="color: var(--neon-green);">-</div>
            </div>
            <div class="stat-card p-4 rounded-xl text-center">
              <div class="text-gray-400 text-xs uppercase tracking-wider">Favorite PC</div>
              <div id="mostUsedPC" class="text-2xl font-bold font-orbitron mt-1" style="color: var(--neon-orange);">-</div>
            </div>
          </div>

          <!-- Charts -->
          <div class="space-y-6">
            <div class="chart-container">
              <h3 class="font-orbitron text-sm font-bold mb-4 glow-cyan" style="color: var(--neon-cyan);">üéÆ PC USAGE</h3>
              <canvas id="pcUsageChart"></canvas>
            </div>

            <div class="chart-container">
              <div class="flex items-center justify-between mb-4">
                <h3 class="font-orbitron text-sm font-bold glow-green" style="color: var(--neon-green);">üìÖ SESSIONS</h3>
                <div class="flex gap-2">
                  <button id="sessionToggleMonth" class="neon-btn px-3 py-1 rounded text-xs">Month</button>
                  <button id="sessionToggleAll" class="neon-btn px-3 py-1 rounded text-xs opacity-50">All</button>
                </div>
              </div>
              <canvas id="sessionTimeChart"></canvas>
            </div>

            <div class="chart-container">
              <div class="flex items-center justify-between mb-4">
                <h3 class="font-orbitron text-sm font-bold glow-orange" style="color: var(--neon-orange);">üí∞ SPENDING</h3>
                <div class="flex gap-2">
                  <button id="spendToggleMonth" class="neon-btn px-3 py-1 rounded text-xs">Month</button>
                  <button id="spendToggleAll" class="neon-btn px-3 py-1 rounded text-xs opacity-50">All</button>
                </div>
              </div>
              <canvas id="spendChart"></canvas>
            </div>
          </div>

          <!-- Recent Sessions -->
          <div>
            <h3 class="font-orbitron text-sm font-bold mb-4 glow-purple" style="color: var(--neon-purple);">üïí RECENT SESSIONS</h3>
            <ul id="recentSessionsList" class="space-y-2"></ul>
          </div>
        </div>
      </div>

      <!-- Booking -->
      <div class="tab-pane hidden" data-tab="booking">
        <form id="bookingForm" class="neon-card rounded-2xl p-6 space-y-6">
          <h2 class="font-orbitron text-xl font-bold glow-green flex items-center gap-3" style="color: var(--neon-green);">
            <i data-lucide="gamepad-2" class="w-6 h-6"></i> BOOK SESSION
          </h2>

          <div id="step1" class="space-y-6">
            <div>
              <label class="block text-sm font-medium mb-3 text-cyan-400 uppercase tracking-wider">Select Date</label>
              <div id="dateButtons" class="flex gap-3 flex-wrap"></div>
              <input type="hidden" id="bookingDate"/>
            </div>

            <div class="grid grid-cols-2 gap-4">
              <div>
                <label for="startTime" class="block text-sm font-medium mb-2 text-cyan-400 uppercase tracking-wider">Start Time</label>
                <select id="startTime" required class="neon-select w-full rounded-lg px-4 py-3 text-white"></select>
              </div>
              <div>
                <label for="endTime" class="block text-sm font-medium mb-2 text-cyan-400 uppercase tracking-wider">End Time</label>
                <select id="endTime" required class="neon-select w-full rounded-lg px-4 py-3 text-white"></select>
              </div>
            </div>

            <div class="flex justify-end">
              <button type="button" id="nextBtn" class="neon-btn px-8 py-3 rounded-lg font-orbitron text-sm">
                Next ‚Üí
              </button>
            </div>
          </div>

          <div id="step2" style="display: none;" class="space-y-6">
            <div>
              <label class="block text-sm font-medium mb-3 text-cyan-400 uppercase tracking-wider">Select PC</label>
              <div id="availablePCs" class="space-y-4"></div>
            </div>

            <p id="priceInfo" class="font-orbitron text-xl font-bold glow-yellow" style="color: var(--neon-yellow);">
              üí∞ Total: ‚Çπ0
            </p>

            <div class="neon-card rounded-xl p-4 text-sm border-yellow-500/30">
              <h3 class="font-orbitron text-yellow-400 font-bold mb-3">‚ö†Ô∏è TERMS</h3>
              <ul class="list-disc pl-5 space-y-1 text-gray-400">
                <li>Confirmed bookings cannot be cancelled or refunded.</li>
                <li>Sessions start at booked time and run till the end.</li>
                <li>Low balance will be topped up; clear it before starting.</li>
                <li>You may wait up to 15 minutes if previous session runs over.</li>
              </ul>
              <label class="flex items-center gap-3 mt-4 text-white">
                <input type="checkbox" id="termsAccepted" required class="w-5 h-5 accent-cyan-400">
                <span>I accept the Terms & Conditions</span>
              </label>
            </div>

            <div class="flex justify-between gap-4">
              <button type="button" id="backBtn" class="neon-btn neon-btn-pink px-6 py-3 rounded-lg font-orbitron text-sm">
                ‚Üê Back
              </button>
              <button type="submit" class="neon-btn neon-btn-green px-8 py-3 rounded-lg font-orbitron text-sm flex-1">
                ‚ö° Book Now
              </button>
            </div>
          </div>
        </form>
        <div id="bookingResult" class="hidden neon-card neon-card-green rounded-xl p-4 text-center font-orbitron mt-4" style="color: var(--neon-green);"></div>
      </div>

      <!-- History -->
      <div class="tab-pane hidden" data-tab="history">
        <div class="neon-card neon-card-purple rounded-2xl p-6 space-y-4">
          <h2 class="font-orbitron text-xl font-bold glow-purple flex items-center gap-3" style="color: var(--neon-purple);">
            <i data-lucide="scroll-text" class="w-6 h-6"></i> ACTIVITY LOG
          </h2>
          <div class="cyber-line"></div>
          <div id="memberHistoryList" class="space-y-3">
            <p class="text-gray-500">Loading your history...</p>
          </div>
        </div>
      </div>
    </div>
      </div>
    </main>
  </div><!-- End of main-app -->

  <!-- Logout Modal -->
  <div id="logoutModal" class="fixed inset-0 z-50 hidden items-center justify-center modal-bg">
    <div class="modal-card rounded-2xl w-full max-w-sm p-6 mx-4">
      <h3 class="font-orbitron text-lg font-bold mb-2 glow-pink" style="color: var(--neon-pink);">‚ö†Ô∏è CONFIRM EXIT</h3>
      <p class="text-gray-400 mb-6">Are you sure you want to disconnect?</p>
      <div class="flex justify-end gap-3">
        <button id="cancelLogout" class="neon-btn px-5 py-2 rounded-lg text-sm">Cancel</button>
        <button id="confirmLogout" class="neon-btn neon-btn-pink px-5 py-2 rounded-lg text-sm font-bold">Exit</button>
      </div>
    </div>
  </div>

  <!-- Install App Banner -->
  <div id="installBanner" class="fixed bottom-4 left-4 right-4 mx-auto max-w-sm p-4 rounded-xl hidden z-50"
    style="background: linear-gradient(135deg, rgba(0,240,255,0.15), rgba(184,41,255,0.15)); border: 1px solid rgba(0,240,255,0.5); backdrop-filter: blur(10px); animation: slideUp 0.3s ease-out;">
    <div class="flex items-center gap-3">
      <div class="w-12 h-12 rounded-xl flex items-center justify-center" style="background: rgba(0,240,255,0.2);">
        <svg viewBox="0 0 100 100" class="w-8 h-8">
          <polygon points="50,10 90,30 90,70 50,90 10,70 10,30" fill="none" stroke="#00f0ff" stroke-width="4"/>
        </svg>
      </div>
      <div class="flex-1">
        <p class="font-orbitron text-sm font-bold" style="color: #00f0ff;">Install OceanZ</p>
        <p class="text-xs text-gray-400">Add to home screen</p>
      </div>
      <button id="installBtn" class="px-4 py-2 rounded-lg font-orbitron text-xs font-bold"
        style="background: linear-gradient(135deg, #00f0ff, #b829ff); color: #000;">
        Install
      </button>
      <button id="dismissInstall" class="text-gray-500 hover:text-white p-1">‚úï</button>
    </div>
  </div>

  <style>
    @keyframes slideUp {
      from { transform: translateY(100px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
  </style>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <script src="../shared/notify.js" type="module"></script>
  <script src="js/dashboard.js" type="module"></script>

  <script>
    lucide.createIcons();

    // Tab switching
    document.addEventListener("DOMContentLoaded", () => {
      const defaultTab = "profile";
      switchTab(defaultTab);

      document.querySelectorAll(".tab-btn").forEach(btn => {
        btn.addEventListener("click", () => switchTab(btn.dataset.tab));
      });

      function switchTab(tabName) {
        document.querySelectorAll(".tab-pane").forEach(pane => {
          pane.classList.toggle("hidden", pane.dataset.tab !== tabName);
        });
        document.querySelectorAll(".tab-btn").forEach(btn => {
          btn.classList.remove("active");
          if (btn.dataset.tab === tabName) btn.classList.add("active");
        });
      }

      // Logout modal
      const logoutBtn = document.getElementById("logoutBtn");
      const modal = document.getElementById("logoutModal");
      const cancelBtn = document.getElementById("cancelLogout");
      const confirmBtn = document.getElementById("confirmLogout");

      logoutBtn?.addEventListener("click", () => {
        modal.classList.remove("hidden");
        modal.classList.add("flex");
      });

      cancelBtn?.addEventListener("click", () => {
        modal.classList.add("hidden");
        modal.classList.remove("flex");
      });

      modal?.addEventListener("click", (e) => {
        if (e.target === modal) {
          modal.classList.add("hidden");
          modal.classList.remove("flex");
        }
      });

      confirmBtn?.addEventListener("click", () => {
        // Clear member session (from both localStorage and sessionStorage)
        if (window.clearMemberSession) {
          window.clearMemberSession();
        } else {
          // Fallback if function not available
          localStorage.removeItem("oceanz_member_session");
          localStorage.removeItem("oceanz_member_session_time");
          sessionStorage.removeItem("member");
        }
        window.location.href = "../index.html";
      });

      // Sidebar Toggle (Mobile)
      const sidebar = document.getElementById("member-sidebar");
      const sidebarBackdrop = document.getElementById("sidebar-backdrop");
      const sidebarToggle = document.getElementById("sidebar-toggle");
      const sidebarClose = document.getElementById("sidebar-close");

      function openSidebar() {
        sidebar?.classList.add("open");
        sidebar?.classList.remove("hidden");
        sidebarBackdrop?.classList.add("active");
        document.body.style.overflow = "hidden";
      }

      function closeSidebar() {
        sidebar?.classList.remove("open");
        sidebarBackdrop?.classList.remove("active");
        document.body.style.overflow = "";
        // Only hide on mobile
        if (window.innerWidth < 768) {
          setTimeout(() => {
            if (!sidebar?.classList.contains("open")) {
              sidebar?.classList.add("hidden");
            }
          }, 300);
        }
      }

      sidebarToggle?.addEventListener("click", openSidebar);
      sidebarClose?.addEventListener("click", closeSidebar);
      sidebarBackdrop?.addEventListener("click", closeSidebar);

      // Close sidebar when nav item clicked (mobile)
      document.querySelectorAll("#memberNav .nav-item").forEach(item => {
        item.addEventListener("click", (e) => {
          e.preventDefault();
          const tab = item.dataset.tab;
          if (tab) {
            // Update active state
            document.querySelectorAll("#memberNav .nav-item").forEach(n => n.classList.remove("active"));
            item.classList.add("active");
            
            // Trigger tab switch via existing dashboard.js logic
            document.querySelectorAll(".tab-pane").forEach(p => p.classList.add("hidden"));
            document.querySelector(`.tab-pane[data-tab="${tab}"]`)?.classList.remove("hidden");
            
            // Close sidebar on mobile
            if (window.innerWidth < 768) {
              closeSidebar();
            }
          }
        });
      });

      // Handle window resize
      window.addEventListener("resize", () => {
        if (window.innerWidth >= 768) {
          sidebar?.classList.remove("hidden", "open");
          sidebarBackdrop?.classList.remove("active");
          document.body.style.overflow = "";
        } else {
          if (!sidebar?.classList.contains("open")) {
            sidebar?.classList.add("hidden");
          }
        }
      });

      // Initial state for mobile
      if (window.innerWidth < 768) {
        sidebar?.classList.add("hidden");
      }

      // Service Worker Registration
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('../sw.js')
          .then(reg => console.log('SW registered:', reg.scope))
          .catch(err => console.log('SW registration failed:', err));
      }

      // PWA Install Prompt
      let deferredPrompt;
      const installBanner = document.getElementById('installBanner');
      const installBtn = document.getElementById('installBtn');
      const dismissBtn = document.getElementById('dismissInstall');

      const installDismissed = localStorage.getItem('pwaInstallDismissed');
      const isStandalone = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone;

      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        
        if (!installDismissed && !isStandalone) {
          setTimeout(() => {
            installBanner?.classList.remove('hidden');
          }, 3000);
        }
      });

      installBtn?.addEventListener('click', async () => {
        if (!deferredPrompt) return;
        
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        deferredPrompt = null;
        installBanner?.classList.add('hidden');
      });

      dismissBtn?.addEventListener('click', () => {
        installBanner?.classList.add('hidden');
        localStorage.setItem('pwaInstallDismissed', 'true');
      });

      window.addEventListener('appinstalled', () => {
        installBanner?.classList.add('hidden');
        deferredPrompt = null;
      });
    });
  </script>
</body>
</html>
